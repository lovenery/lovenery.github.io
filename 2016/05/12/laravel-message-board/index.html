<!DOCTYPE html>
<html lang="en,zh-TW,zh-CN,default">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.7.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="Reference:laravel.com以下將實作一個留言版有會員系統,以及可以新增顯示刪除留言,且知道如何只看到自己的留言">
<meta property="og:type" content="article">
<meta property="og:title" content="Laravel 留言板">
<meta property="og:url" content="http://yoursite.com/2016/05/12/laravel-message-board/index.html">
<meta property="og:site_name" content="Chenxu&#39;s Notes">
<meta property="og:description" content="Reference:laravel.com以下將實作一個留言版有會員系統,以及可以新增顯示刪除留言,且知道如何只看到自己的留言">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2020-01-01T16:08:14.461Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Laravel 留言板">
<meta name="twitter:description" content="Reference:laravel.com以下將實作一個留言版有會員系統,以及可以新增顯示刪除留言,且知道如何只看到自己的留言">

<link rel="canonical" href="http://yoursite.com/2016/05/12/laravel-message-board/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>Laravel 留言板 | Chenxu's Notes</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Chenxu's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/12/laravel-message-board/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Chenxu Wang">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chenxu's Notes">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Laravel 留言板
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2016-05-12 15:39:00" itemprop="dateCreated datePublished" datetime="2016-05-12T15:39:00+08:00">2016-05-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-01-02 00:08:14" itemprop="dateModified" datetime="2020-01-02T00:08:14+08:00">2020-01-02</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Reference:<a href="http://laravel.com" target="_blank" rel="external">laravel.com</a><br>以下將實作一個留言版有會員系統,以及可以新增顯示刪除留言,且知道如何只看到自己的留言</p>
<a id="more"></a>
<h1 id="目錄"><a href="#目錄" class="headerlink" title="目錄"></a>目錄</h1><ol>
<li><a href="#env">Environment 環境</a></li>
<li><a href="#database">Database 資料庫</a></li>
<li><a href="#route">Routing 路由</a></li>
<li><a href="#view">Layouts &amp; Views</a></li>
<li><a href="#create">Create 新增</a></li>
<li><a href="#read">Read 讀取</a></li>
<li><a href="#delete">Delete 刪除</a></li>
<li><a href="#review">Review 後記</a></li>
<li><a href="#bot">到底端</a></li>
</ol>
<hr>
<h1 id="Environment-環境"><a href="#Environment-環境" class="headerlink" title="- Environment 環境"></a><a name="env"></a><strong>- Environment 環境</strong></h1><h2 id="安裝-Laravel"><a href="#安裝-Laravel" class="headerlink" title="安裝 Laravel"></a>安裝 Laravel</h2><p>規則 <code># composer create-project --prefer-dist [&lt;package&gt;] [&lt;directory&gt;] [&lt;version&gt;]</code><br><code># composer create-project --prefer-dist laravel/laravel guestbook</code></p>
<p>測試看看可不可以跑:P<br><code># cd guestbook</code><br><code># php artisan serve</code></p>
<h2 id="env檔"><a href="#env檔" class="headerlink" title=".env檔"></a>.env檔</h2><p>記得先去mysql新增一個資料庫(guestbook)<br><figure class="highlight ruby"><figcaption><span>.env</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">DB_DATABASE=guestbook</div><div class="line">DB_USERNAME=自訂</div><div class="line">DB_PASSWORD=自訂</div></pre></td></tr></table></figure></p>
<h1 id="Database-資料庫"><a href="#Database-資料庫" class="headerlink" title="- Database 資料庫"></a><a name="database"></a><strong>- Database 資料庫</strong></h1><h2 id="資料表-Table"><a href="#資料表-Table" class="headerlink" title="資料表 Table"></a>資料表 Table</h2><p>我們將需要<code>users</code>資料表和<code>messages</code>資料表<br>laravel已經幫我們弄好users資料表的migration<br>所以我們只要製作messages資料表的migration<br><code># php artisan make:migration create_messages_table --create=messages</code><br>以上兩個遷移檔都在<code>database/migrations</code>中可以找到</p>
<p>讓我們在messages新增兩個欄位:用來跟user做關聯與留言內容<br><figure class="highlight ruby"><figcaption><span>time_create_messages_table.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public function up()</div><div class="line">&#123;</div><div class="line">  Schema::create(<span class="string">'messages'</span>, function (Blueprint $table) &#123;</div><div class="line">    $table-&gt;increments(<span class="string">'id'</span>);</div><div class="line">    $table-&gt;integer(<span class="string">'user_id'</span>)-&gt;index(); <span class="regexp">//</span> 新增</div><div class="line">    $table-&gt;string(<span class="string">'name'</span>); <span class="regexp">//</span> 新增</div><div class="line">    $table-&gt;timestamps();</div><div class="line">  &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>好了之後執行<br><code># php artisan migrate</code><br>可以打開你的database檢查看看guestbook資料庫有了<code>users</code>資料表和<code>messages</code>資料表</p>
<h2 id="Model-模型-Eloquent-Model"><a href="#Model-模型-Eloquent-Model" class="headerlink" title="Model 模型 (Eloquent Model)"></a>Model 模型 (Eloquent Model)</h2><p>一般來說一個model對應一張資料表<br>laravel已經幫我們弄好User Model(<code>app/User.php</code>)<br>所以我們只要<br><code># php artisan make:model Message</code><br>Message.php就這樣出現了(<code>app/Message.php</code>)</p>
<p>讓我們在Message model新增讓<code>name</code>欄位能夠被mass-assignable(批量賦值,再使用model的<code>create</code>方法時能夠填入<code>name</code>)<br>使用<code>$fillable</code><br><figure class="highlight ruby"><figcaption><span>app/Message.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App;</div><div class="line"></div><div class="line">use Illuminate\Database\Eloquent\Model;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="title">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    protected $fillable = [<span class="string">'name'</span>]; <span class="regexp">//</span> 新增</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="關聯-Relationship-Eloquent-Relationships"><a href="#關聯-Relationship-Eloquent-Relationships" class="headerlink" title="關聯 Relationship (Eloquent Relationships)"></a>關聯 Relationship (Eloquent Relationships)</h2><p>首先我們要知道一個User可以多個Message，而一篇Message則只有一個User</p>
<p><code>messages</code> 關聯<br><figure class="highlight"><figcaption><span>app/User.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App;</div><div class="line"></div><div class="line">use Illuminate\Foundation\Auth\User as Authenticatable;</div><div class="line"></div><div class="line">class User extends Authenticatable</div><div class="line">&#123;</div><div class="line">		// 其他的 Eloquent 屬性(非重點)</div><div class="line"></div><div class="line">    // 新增,可以取得該user的所有message。</div><div class="line">    public function messages()</div><div class="line">    &#123;</div><div class="line">        return $this-&gt;hasMany(Message::class);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>users</code> 關聯<br><figure class="highlight ruby"><figcaption><span>app/Message.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App;</div><div class="line"></div><div class="line">use Illuminate\Database\Eloquent\Model;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="title">extends</span> <span class="title">Model</span></span></div><div class="line">&#123;</div><div class="line">    protected $fillable = [<span class="string">'name'</span>];</div><div class="line"></div><div class="line">    <span class="regexp">//</span> 新增,取得此篇message撰寫之user</div><div class="line">    public function user()</div><div class="line">    &#123;</div><div class="line">        <span class="keyword">return</span> $this-&gt;belongsTo(User::<span class="class"><span class="keyword">class</span>);</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>有了關聯我們就能靈活運用例如下:<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$user = App\User::find(<span class="number">1</span>);</div><div class="line"></div><div class="line">foreach ($user-&gt;messages as $message) &#123;</div><div class="line">    echo $message-&gt;name;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="Routing-路由"><a href="#Routing-路由" class="headerlink" title="- Routing 路由"></a><a name="route"></a><strong>- Routing 路由</strong></h1><h2 id="View-視圖"><a href="#View-視圖" class="headerlink" title="View 視圖"></a>View 視圖</h2><p>以下預設的程式碼回傳的view就是laravel的歡迎頁面<br>可以在<code>resources/views</code>中看到，我們待會再來弄這些檔案<br><figure class="highlight ruby"><figcaption><span>app/Http/routes.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::get(<span class="string">'/'</span>, function () &#123;</div><div class="line">    <span class="keyword">return</span> view(<span class="string">'welcome'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<h2 id="Authentication-認證"><a href="#Authentication-認證" class="headerlink" title="Authentication 認證"></a>Authentication 認證</h2><p>Laravel都寫好了<br>定義在<code>app/Http/Controllers/Auth/AuthController.php</code>中<br>那我們要寫啥呢? 答案就是:註冊+登入的模板和指向AuthController的路由</p>
<p>但Laravel 5.2提供了以下方法<br><code># php artisan make:auth --views</code><br>(–views 代表只幫我們相關新增view)<br>差在幫你<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::auth();</div><div class="line">Route::get(<span class="string">'/home'</span>, <span class="string">'HomeController@index'</span>);</div><div class="line">還有製造HomeController</div></pre></td></tr></table></figure></p>
<p>在<code>resources/views</code>產生了<code>auth/一堆檔案</code>、<code>layout/app.blade.php</code>、<code>home.blade.php</code>、<code>welcome.blade.php</code></p>
<p>在<code>app/Http/routes.php</code>加入這行<br><figure class="highlight ruby"><figcaption><span>app/Http/routes.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Route::auth();</div></pre></td></tr></table></figure></p>
<p>它的功能可以在<code>/vendor/laravel/framework/src/Illuminate/Routing/Router.php</code>中看見<br><figure class="highlight ruby"><figcaption><span>/vendor/laravel/framework/src/Illuminate/Routing/Router.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">public function auth()</div><div class="line">&#123;</div><div class="line">    <span class="regexp">//</span> Authentication Routes...</div><div class="line">    $this-&gt;get(<span class="string">'login'</span>, <span class="string">'Auth\AuthController@showLoginForm'</span>);</div><div class="line">    $this-&gt;post(<span class="string">'login'</span>, <span class="string">'Auth\AuthController@login'</span>);</div><div class="line">    $this-&gt;get(<span class="string">'logout'</span>, <span class="string">'Auth\AuthController@logout'</span>);</div><div class="line"></div><div class="line">    <span class="regexp">//</span> Registration Routes...</div><div class="line">    $this-&gt;get(<span class="string">'register'</span>, <span class="string">'Auth\AuthController@showRegistrationForm'</span>);</div><div class="line">    $this-&gt;post(<span class="string">'register'</span>, <span class="string">'Auth\AuthController@register'</span>);</div><div class="line"></div><div class="line">    <span class="regexp">//</span> Password Reset Routes...</div><div class="line">    $this-&gt;get(<span class="string">'password/reset/&#123;token?&#125;'</span>, <span class="string">'Auth\PasswordController@showResetForm'</span>);</div><div class="line">    $this-&gt;post(<span class="string">'password/email'</span>, <span class="string">'Auth\PasswordController@sendResetLinkEmail'</span>);</div><div class="line">    $this-&gt;post(<span class="string">'password/reset'</span>, <span class="string">'Auth\PasswordController@reset'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Message-Controller"><a href="#Message-Controller" class="headerlink" title="Message Controller"></a>Message Controller</h2><p><code># php artisan make:controller MessageController</code><br>這個檔案會放在<code>app/Http/Controllers</code>中</p>
<figure class="highlight ruby"><figcaption><span>app/Http/routes.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Route::get(<span class="string">'/messages'</span>, <span class="string">'MessageController@index'</span>);</div><div class="line">Route::post(<span class="string">'/message'</span>, <span class="string">'MessageController@store'</span>);</div><div class="line">Route::delete(<span class="string">'/message/&#123;message&#125;'</span>, <span class="string">'MessageController@destroy'</span>);</div></pre></td></tr></table></figure>
<p>我們現在需要讓user登入之後才可以發message<br>為了要讓所有MessageController的行為(新增修改刪除)要有認證才能用<br>可以在constructor(建構子)增加middleware method的呼叫<br>ps.可用的增加<code>middleware</code>都定義再<code>app/Http/Kernel.php</code><br><figure class="highlight ruby"><figcaption><span>app/Http/Controller/MessageController.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App\Http\Controllers;</div><div class="line"></div><div class="line">use Illuminate\Http\Request;</div><div class="line">use App\Http\Requests;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MessageController</span> <span class="title">extends</span> <span class="title">Controller</span></span></div><div class="line">&#123;</div><div class="line">		<span class="regexp">//</span> 新增</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        $this-&gt;middleware(<span class="string">'auth'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="Layouts-amp-Views"><a href="#Layouts-amp-Views" class="headerlink" title="- Layouts &amp; Views"></a><a name="view"></a><strong>- Layouts &amp; Views</strong></h1><h2 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h2><p>還記得<code># php artisan make:auth --views</code>這個指令嗎?他幫我們寫完Layout了<br>如果不喜歡就讓我們砍掉重練layout吧,範例中有引入bootstrap跟jquery<br>別的頁面的內容可以寫在<code>@yield(&#39;content&#39;)</code>中<br><figure class="highlight html"><figcaption><span>resources/views/layouts/app.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>Laravel Guestbook<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- Latest compiled and minified CSS --&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"</span> <span class="attr">integrity</span>=<span class="string">"sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span></div><div class="line">				<span class="comment">&lt;!-- Optional theme --&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"</span> <span class="attr">integrity</span>=<span class="string">"sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span></div><div class="line">				<span class="comment">&lt;!-- Latest compiled and minified JavaScript --&gt;</span></div><div class="line">				<span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"</span> <span class="attr">integrity</span>=<span class="string">"sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"</span> <span class="attr">crossorigin</span>=<span class="string">"anonymous"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">"navbar navbar-default"</span>&gt;</span></div><div class="line">                I'm Navbar</div><div class="line">            <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">        @yield('content')</div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="Views"><a href="#Views" class="headerlink" title="Views"></a>Views</h2><p>接下來產生建立留言的表單跟列出所有留言的view吧<br>引用語法是<code>@extends(&#39;layouts.app&#39;)</code>,<code>@section(&#39;content&#39;)</code> 及 <code>@endsection</code><br><figure class="highlight html"><figcaption><span>resources/views/messages/index.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">@extends('layouts.app')</div><div class="line"></div><div class="line">@section('content')</div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- Bootstrap 樣板... --&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-body"</span>&gt;</span></div><div class="line">        <span class="comment">&lt;!-- 顯示驗證錯誤 --&gt;</span></div><div class="line">        @include('common.errors')</div><div class="line"></div><div class="line">        <span class="comment">&lt;!-- 新留言的表單 --&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"&#123;&#123; url('message') &#125;&#125;"</span> <span class="attr">method</span>=<span class="string">"POST"</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></div><div class="line">            &#123;&#123; csrf_field() &#125;&#125;</div><div class="line"></div><div class="line">            <span class="comment">&lt;!-- 留言內容 --&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"message-name"</span> <span class="attr">class</span>=<span class="string">"col-sm-3 control-label"</span>&gt;</span>請輸入<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line"></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-6"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span> <span class="attr">id</span>=<span class="string">"message-name"</span> <span class="attr">class</span>=<span class="string">"form-control"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">            <span class="comment">&lt;!-- 增加留言按鈕--&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-offset-3 col-sm-6"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span>&gt;</span></div><div class="line">                        <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-plus"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 留言</div><div class="line">                    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="comment">&lt;!-- 未完成：顯示目前留言 --&gt;</span></div><div class="line">@endsection</div></pre></td></tr></table></figure></p>
<p>接著讓我們在<code>MessageController</code>的<code>index</code>方法回傳此view<br><figure class="highlight ruby"><figcaption><span>app/Http/Controller/MessageController.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Display a list of all of the user<span class="string">'s message.</span></div><div class="line"> *</div><div class="line"> * @param  Request  $request</div><div class="line"> * @return Response</div><div class="line"> */</div><div class="line">public function index(Request $request)</div><div class="line">&#123;</div><div class="line">    return view('messages.index<span class="string">');</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>那我們現在只需要<code>POST /message</code> route’s controller method來處理表單輸入的內容</p>
<h1 id="Create-新增"><a href="#Create-新增" class="headerlink" title="- Create 新增"></a><a name="create"></a><strong>- Create 新增</strong></h1><h2 id="Validation-驗證"><a href="#Validation-驗證" class="headerlink" title="Validation 驗證"></a>Validation 驗證</h2><p>我們繼續新增<code>MessageController@store</code>來驗證表單輸入的內容<br>規定<code>name</code>欄位為必填及少於255字<br>我們可以使用controller內建的<code>ValidatesRequests</code>trait<br>它提供了<code>validate</code>method,接收一個request和驗證規則的陣列<br><figure class="highlight"><figcaption><span>app/Http/Controller/MessageController.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Create a new message.</div><div class="line"> *</div><div class="line"> * @param  Request  $request</div><div class="line"> * @return Response</div><div class="line"> */</div><div class="line">public function store(Request $request)</div><div class="line">&#123;</div><div class="line">    $this-&gt;validate($request, [</div><div class="line">        'name' =&gt; 'required|max:255',</div><div class="line">    ]);</div><div class="line"></div><div class="line">    //待新增 : Create The Message...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="errors-Variable"><a href="#errors-Variable" class="headerlink" title="$errors Variable"></a>$errors Variable</h2><p>這個$errors變數可以用在所有的view中~<br>還記得我們在view中使用了<code>@include(&#39;common.errors&#39;)</code>讓我們新增這個檔案<br><figure class="highlight"><figcaption><span>resources/views/common/errors.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@if (count($errors) &gt; 0)</div><div class="line">    &lt;!-- 表單錯誤清單 --&gt;</div><div class="line">    &lt;div class="alert alert-danger"&gt;</div><div class="line">        &lt;strong&gt;Whoops! Something went wrong!&lt;/strong&gt;</div><div class="line"></div><div class="line">        &lt;br&gt;&lt;br&gt;</div><div class="line"></div><div class="line">        &lt;ul&gt;</div><div class="line">            @foreach ($errors-&gt;all() as $error)</div><div class="line">                &lt;li&gt;&#123;&#123; $error &#125;&#125;&lt;/li&gt;</div><div class="line">            @endforeach</div><div class="line">        &lt;/ul&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">@endif</div></pre></td></tr></table></figure></p>
<h2 id="Create-Message"><a href="#Create-Message" class="headerlink" title="Create Message!"></a>Create Message!</h2><p>現在驗證輸入已經完畢~返回到我們的主題-新增<br>laravel為relationship提供<code>create</code>方法,會接收一個陣列並自動設置foreign key<br>使用<code>$request-&gt;user()</code>得到目前的使用者,會被<code>create</code>自動填入<code>user_id</code></p>
<figure class="highlight"><figcaption><span>app/Http/Controller/MessageController.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Create a new message.</div><div class="line"> *</div><div class="line"> * @param  Request  $request</div><div class="line"> * @return Response</div><div class="line"> */</div><div class="line">public function store(Request $request)</div><div class="line">&#123;</div><div class="line">    $this-&gt;validate($request, [</div><div class="line">        'name' =&gt; 'required|max:255',</div><div class="line">    ]);</div><div class="line"></div><div class="line">    $request-&gt;user()-&gt;messages()-&gt;create([</div><div class="line">        'name' =&gt; $request-&gt;name,</div><div class="line">    ]);</div><div class="line"></div><div class="line">    return redirect('/messages');</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="Read-讀取"><a href="#Read-讀取" class="headerlink" title="- Read 讀取"></a><a name="read"></a><strong>- Read 讀取</strong></h1><h2 id="Displaying-Messages"><a href="#Displaying-Messages" class="headerlink" title="Displaying Messages!"></a>Displaying Messages!</h2><p>我們現在要顯示所有留言,因此需使用<code>MessageController@index</code>方法<br><code>view</code>函式第二個參數(array)可以在view中使用<br><figure class="highlight ruby"><figcaption><span>app/Http/Controller/MessageController.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Display a list of all of the user<span class="string">'s message.</span></div><div class="line"> *</div><div class="line"> * @param  Request  $request</div><div class="line"> * @return Response</div><div class="line"> */</div><div class="line">public function index(Request $request)</div><div class="line">&#123;</div><div class="line">		// 等同於$messages = Message::where('user_id<span class="string">', $request-&gt;user()-&gt;id)-&gt;get();</span></div><div class="line">    $messages = $request-&gt;user()-&gt;messages()-&gt;get();</div><div class="line"></div><div class="line">    return view('messages.index<span class="string">', [</span></div><div class="line">        'messages<span class="string">' =&gt; $messages,</span></div><div class="line">    ]);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Dependency-Injection-依賴注入"><a href="#Dependency-Injection-依賴注入" class="headerlink" title="Dependency Injection 依賴注入"></a>Dependency Injection 依賴注入</h2><p>我們將注入<code>MessageRepository</code>至我們的<code>MessageController</code>,透過它存取所有的資料</p>
<p>1.首先先建立資源庫(Creating The Repository)<br>定義一個 <code>MessageRepository</code> 存放所有 <code>Message model</code>的資料存取邏輯</p>
<p>我們建立 <code>app/Repositories</code>目錄,並增加<code>MessageRepository</code>Class<br><figure class="highlight"><figcaption><span>app/Repositories/MessageRepository.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App\Repositories;</div><div class="line"></div><div class="line">use App\User;</div><div class="line"></div><div class="line">class MessageRepository</div><div class="line">&#123;</div><div class="line">    /**</div><div class="line">     * Get all of the messages for a given user.</div><div class="line">     *</div><div class="line">     * @param  User  $user</div><div class="line">     * @return Collection</div><div class="line">     */</div><div class="line">    public function forUser(User $user)</div><div class="line">    &#123;</div><div class="line">        return $user-&gt;messages()</div><div class="line">                    -&gt;orderBy('created_at', 'asc')</div><div class="line">                    -&gt;get();</div><div class="line">        /** 這樣也可</div><div class="line">         *return Message::where('user_id', $user-&gt;id)</div><div class="line">         *            -&gt;orderBy('created_at', 'asc')</div><div class="line">         *            -&gt;get();</div><div class="line">         */</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>2.注入資源庫(Injecting The Repository)<br>資源庫已經定義好於是,<br>在 <code>MessageController</code> 的constructor中對它使用type-hint(型別提示),並在我們的 index route中使用<br><figure class="highlight"><figcaption><span>app/Http/Controller/MessageController.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App\Http\Controllers;</div><div class="line"></div><div class="line">use App\Http\Requests;</div><div class="line">use Illuminate\Http\Request;</div><div class="line">use App\Message; // 新增</div><div class="line">use App\Repositories\MessageRepository; // 新增</div><div class="line"></div><div class="line">class MessageController extends Controller</div><div class="line">&#123;</div><div class="line">    /**</div><div class="line">     * The repository instance.</div><div class="line">     *</div><div class="line">     * @var MessageRepository</div><div class="line">     */</div><div class="line">    protected $messages;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Create a new controller instance.</div><div class="line">     *</div><div class="line">     * @param  MessageRepository  $messages</div><div class="line">     * @return void</div><div class="line">     */</div><div class="line">    public function __construct(MessageRepository $messages) // 新增</div><div class="line">    &#123;</div><div class="line">        $this-&gt;middleware('auth');</div><div class="line"></div><div class="line">        $this-&gt;messages = $messages; // 新增</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Display a list of all of the user's message.</div><div class="line">     *</div><div class="line">     * @param  Request  $request</div><div class="line">     * @return Response</div><div class="line">     */</div><div class="line">    public function index(Request $request)</div><div class="line">    &#123;</div><div class="line">        return view('messages.index', [</div><div class="line">            'messages' =&gt; $this-&gt;messages-&gt;forUser($request-&gt;user()),</div><div class="line">        ]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Displaying-Messages-1"><a href="#Displaying-Messages-1" class="headerlink" title="Displaying Messages"></a>Displaying Messages</h2><figure class="highlight"><figcaption><span>resources/view/messages/index.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">@extends('layouts.app')</div><div class="line"></div><div class="line">@section('content')</div><div class="line">    &lt;!-- 已完成：建立留言 --&gt;</div><div class="line"></div><div class="line">    &lt;!-- 顯示目前留言 --&gt;</div><div class="line">    @if (count($messages) &gt; 0)</div><div class="line">        &lt;div class="panel panel-default"&gt;</div><div class="line">            &lt;div class="panel-heading"&gt;</div><div class="line">                Current Messages</div><div class="line">            &lt;/div&gt;</div><div class="line"></div><div class="line">            &lt;div class="panel-body"&gt;</div><div class="line">                &lt;table class="table table-striped message-table"&gt;</div><div class="line"></div><div class="line">                    &lt;!-- Table Headings --&gt;</div><div class="line">                    &lt;thead&gt;</div><div class="line">                        &lt;th&gt;Content&lt;/th&gt;</div><div class="line">                        &lt;th&gt;&amp;nbsp;&lt;/th&gt;</div><div class="line">                    &lt;/thead&gt;</div><div class="line"></div><div class="line">                    &lt;!-- Table Body --&gt;</div><div class="line">                    &lt;tbody&gt;</div><div class="line">                        @foreach ($messages as $message)</div><div class="line">                            &lt;tr&gt;</div><div class="line">                                &lt;!-- Message Name --&gt;</div><div class="line">                                &lt;td class="table-text"&gt;</div><div class="line">                                    &lt;div&gt;&#123;&#123; $message-&gt;name &#125;&#125;&lt;/div&gt;</div><div class="line">                                &lt;/td&gt;</div><div class="line"></div><div class="line">                                &lt;td&gt;</div><div class="line">                                    &lt;!-- 未完成：刪除按鈕 --&gt;</div><div class="line">                                &lt;/td&gt;</div><div class="line">                            &lt;/tr&gt;</div><div class="line">                        @endforeach</div><div class="line">                    &lt;/tbody&gt;</div><div class="line">                &lt;/table&gt;</div><div class="line">            &lt;/div&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    @endif</div><div class="line">@endsection</div></pre></td></tr></table></figure>
<p>現在可以顯示留言跟新增留言嚕~~<br>只剩下刪除功能</p>
<h1 id="Delete-刪除"><a href="#Delete-刪除" class="headerlink" title="- Delete 刪除"></a><a name="delete"></a><strong>- Delete 刪除</strong></h1><h2 id="增加刪除按鈕"><a href="#增加刪除按鈕" class="headerlink" title="增加刪除按鈕"></a>增加刪除按鈕</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">這邊`action=&quot;&#123;&#123; url(&apos;message/&apos;.$message-&gt;id) &#125;&#125;&quot;` 就是 `action=&quot;/message/&#123;&#123; $message-&gt;id &#125;&#125;&quot;`的意思</div><div class="line">我們為了要在route使用delete,所以加了`&#123;&#123; method_field(&apos;DELETE&apos;) &#125;&#125;`,但不加用post也是可~</div></pre></td></tr></table></figure>
<figure class="highlight"><figcaption><span>resources/view/messages/index.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;!-- Delete Button --&gt;</div><div class="line">&lt;td&gt;</div><div class="line">    &lt;form action="&#123;&#123; url('message/'.$message-&gt;id) &#125;&#125;" method="POST"&gt;</div><div class="line">        &#123;!! csrf_field() !!&#125;</div><div class="line">        &#123;!! method_field('DELETE') !!&#125;</div><div class="line"></div><div class="line">        &lt;button type="submit" id="delete-message-&#123;&#123; $message-&gt;id &#125;&#125;" class="btn btn-danger"&gt;</div><div class="line">            &lt;i class="fa fa-btn fa-trash"&gt;&lt;/i&gt;Delete</div><div class="line">        &lt;/button&gt;</div><div class="line">    &lt;/form&gt;</div><div class="line">&lt;/td&gt;</div></pre></td></tr></table></figure>
<h2 id="Route-Model-Binding"><a href="#Route-Model-Binding" class="headerlink" title="Route Model Binding"></a>Route Model Binding</h2><p>觀察一下<br>route中的{message}跟controller中的$message是相符的<br>Laravel 5.2的<code>implicit model binding</code>(隱式模型綁定)會自動注入對應的model instance<br>讓我們新增delete route和delete method=destroy<br><figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Route::delete(<span class="string">'/message/&#123;message&#125;'</span>, <span class="string">'MessageController@destroy'</span>);</div><div class="line">跟</div><div class="line">public function destroy(Request $request, Message $message)</div><div class="line">&#123;</div><div class="line">    $message-&gt;delete();</div><div class="line"></div><div class="line">    <span class="keyword">return</span> redirect(<span class="string">'/messages'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="Authorization-認證"><a href="#Authorization-認證" class="headerlink" title="Authorization 認證"></a>Authorization 認證</h2><p>我們要防止壞蛋隨機亂傳<code>/message/{message}</code>URL來亂刪留言<br>Laravel 使用 <code>Policy</code> 來授權,一般一個policy會對應置一個model<br>讓我們下指令<br><code>php artisan make:policy MessagePolicy</code><br>並更改產生的檔案<br>增加一個destroy function,簡單的檢查當使用者的 ID 符合message的 user_id<br>ps.所有的Policy都必須回傳ture或false<br><figure class="highlight"><figcaption><span>app/Policies/MessagePolicy.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">namespace App\Policies;</div><div class="line"></div><div class="line">use Illuminate\Auth\Access\HandlesAuthorization;</div><div class="line"></div><div class="line">use App\User; // 新增</div><div class="line">use App\Message; // 新增</div><div class="line"></div><div class="line">class MessagePolicy</div><div class="line">&#123;</div><div class="line">    use HandlesAuthorization;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Create a new policy instance.</div><div class="line">     *</div><div class="line">     * @return void</div><div class="line">     */</div><div class="line">    public function __construct()</div><div class="line">    &#123;</div><div class="line">        //</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // 新增</div><div class="line">    public function destroy(User $user, Message $message)</div><div class="line">    &#123;</div><div class="line">        return $user-&gt;id === $message-&gt;user_id;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>讓我們來連接 <code>Message Model</code> 與 <code>MessagePolicy</code><br>這會告訴 Laravel，每當我們嘗試授權 Message instance的行為時該用哪個policy：<br><figure class="highlight"><figcaption><span>app/Providers/AuthServiceProvider.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">protected $policies = [</div><div class="line">    'App\Message' =&gt; 'App\Policies\MessagePolicy', // 新增</div><div class="line">];</div><div class="line">或</div><div class="line">protected $policies = [</div><div class="line">    Message::class =&gt; MessagePolicy::class, // 新增</div><div class="line">];</div></pre></td></tr></table></figure></p>
<p>現在我們policy已經寫完了,讓我們去controller的destroy使用他<br><code>authorize</code> method的第一個參數是我們希望呼叫的<code>policy</code>method名,第二個參數是model<br>ps.所有Laravel的controller可呼叫 <code>authorize</code> method(AuthorizesRequest trait提供)<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Destroy the given message.</div><div class="line"> *</div><div class="line"> * @param  Request  $request</div><div class="line"> * @param  Message  $message</div><div class="line"> * @return Response</div><div class="line"> */</div><div class="line">public function destroy(Request $request, Message $message)</div><div class="line">&#123;</div><div class="line">    $this-&gt;authorize('destroy', $message);</div><div class="line"></div><div class="line">    $message-&gt;delete();</div><div class="line"></div><div class="line">    return redirect('/messages');</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="Review-後記"><a href="#Review-後記" class="headerlink" title="- Review 後記"></a><a name="review"></a><strong>- Review 後記</strong></h1><p>你做到了:P<br>接下來是雜項~可以不理我XD</p>
<h2 id="完整Layout"><a href="#完整Layout" class="headerlink" title="完整Layout"></a>完整Layout</h2><p>加些完整的東西到<code>resources/view/messages/index.blade.php</code>吧<br><figure class="highlight html"><figcaption><span>resources/view/messages/index.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-offset-2 col-sm-8"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel panel-default"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"panel-heading"</span>&gt;</span></div><div class="line">                New Message</div><div class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                ...</div><div class="line">                ...</div><div class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">            ...</div><div class="line">            ...</div><div class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="只有自己能看到"><a href="#只有自己能看到" class="headerlink" title="只有自己能看到"></a>只有自己能看到</h2><p>記住這是個只看得到自己留言的留言版<br>如果想要顯示大家的留言可以這樣做<br>讓$messages不篩選user_id<br><figure class="highlight ruby"><figcaption><span>app/Http/Controller/MessageController.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public function index()</div><div class="line">&#123;</div><div class="line">		$messages = Message::all();</div><div class="line">    <span class="keyword">return</span> view(<span class="string">'messages.index'</span>, [</div><div class="line">        <span class="string">'messages'</span> =&gt; $messages,</div><div class="line">    ]);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>再去view改成只有自己的留言有刪除按鈕就好<br><figure class="highlight ruby"><figcaption><span>resources/view/messages/index.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@if (Auth::user()-&gt;id==$message-&gt;user_id)</div><div class="line">		&lt;!-- Delete Button&gt;</div><div class="line">@endif</div></pre></td></tr></table></figure></p>
<h2 id="顯示單一留言詳細內容"><a href="#顯示單一留言詳細內容" class="headerlink" title="顯示單一留言詳細內容"></a>顯示單一留言詳細內容</h2><p>只要加上一些就可以嚕<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Route::get('messages/&#123;message&#125;', 'MessageController@show');</div><div class="line"></div><div class="line">public function show(Message $message)//$id)</div><div class="line">&#123;</div><div class="line">    //$message = Message::find($id);</div><div class="line">    return $message;</div><div class="line">&#125;</div><div class="line"></div><div class="line">&lt;a href="&#123;&#123; url('messages/'.$message-&gt;id) &#125;&#125;"&gt;&lt;div&gt;&#123;&#123; $message-&gt;name &#125;&#125;&lt;/div&gt;&lt;/a&gt;</div></pre></td></tr></table></figure></p>
<h2 id="新增留言的回覆"><a href="#新增留言的回覆" class="headerlink" title="新增留言的回覆"></a>新增留言的回覆</h2><p>Database&amp;Model<br><code>php artisan make:migration create_notes_table --create=notes</code><br><figure class="highlight ruby"><figcaption><span>migration file</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$table-&gt;integer(<span class="string">'message_id'</span>)-&gt;unsigned()-&gt;index();</div><div class="line">$table-&gt;text(<span class="string">'body'</span>);</div></pre></td></tr></table></figure></p>
<p><code># php artisan migrate</code><br><code>php artisan make:model Note</code><br><figure class="highlight ruby"><figcaption><span>Note.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">protected $fillable = [<span class="string">'body'</span>];</div><div class="line">public function message()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> $this-&gt;belongsTo(Message::<span class="class"><span class="keyword">class</span>);</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight"><figcaption><span>Message.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public function notes()</div><div class="line">&#123;</div><div class="line">    return $this-&gt;hasMany(Note::class); // Note::class=App\Note</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<hr>
<p>Route&amp;Controller<br><figure class="highlight ruby"><figcaption><span>route.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Route::post(<span class="string">'messages/&#123;message&#125;/notes'</span>, <span class="string">'NotesController@store'</span>);</div></pre></td></tr></table></figure></p>
<p><code>php artisan make:controller NotesController</code><br><figure class="highlight ruby"><figcaption><span>NotesController</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">use App\Message;</div><div class="line">use App\Note;</div><div class="line">public function store(Request $request, Message $message)</div><div class="line">&#123;</div><div class="line">    $message-&gt;notes()-&gt;create([</div><div class="line">        <span class="string">'body'</span> =&gt; $request-&gt;body</div><div class="line">    ]);</div><div class="line">    <span class="keyword">return</span> back();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<hr>
<p>View<br><figure class="highlight"><figcaption><span>resources/messages/show.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">@extends('layouts.app')</div><div class="line"></div><div class="line">@section('content')</div><div class="line">&lt;div class="container"&gt;</div><div class="line">&lt;div class="row"&gt;</div><div class="line">&lt;div class="col-md-6 col-md-offset-3"&gt;</div><div class="line"></div><div class="line">    &lt;div class="breadcrumb"&gt;&#123;&#123; $message-&gt;name &#125;&#125;&lt;/div&gt;</div><div class="line">    &lt;ul class="list-group"&gt;</div><div class="line">        @foreach ($message-&gt;notes as $note)</div><div class="line">            &lt;li class="list-group-item"&gt;&#123;&#123; $note-&gt;body &#125;&#125;&lt;/li&gt;</div><div class="line">        @endforeach</div><div class="line">    &lt;/ul&gt;</div><div class="line"></div><div class="line">    &lt;form method="POST" action="/messages/&#123;&#123; $message-&gt;id&#125;&#125;/notes"&gt;</div><div class="line">        &#123;&#123; csrf_field() &#125;&#125;</div><div class="line">        &lt;div class="form-group"&gt;</div><div class="line">            &lt;textarea name="body" class="form-control"&gt;&lt;/textarea&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line"></div><div class="line">        &lt;div class="form-group"&gt;</div><div class="line">            &lt;button type="submit" class="btn btn-primary"&gt;Add Comment&lt;/button&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/form&gt;</div><div class="line"></div><div class="line">&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">@endsection</div></pre></td></tr></table></figure></p>
<h2 id="編輯留言"><a href="#編輯留言" class="headerlink" title="編輯留言"></a>編輯留言</h2><p><code>Route::get(&#39;messages/{message}/edit&#39;,&#39;MessageController@edit&#39;);</code></p>
<figure class="highlight"><figcaption><span>index.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;!-- Edit Button --&gt;</div><div class="line">&lt;td&gt;</div><div class="line">    @if (Auth::user()-&gt;id==$message-&gt;user_id)</div><div class="line">        &lt;form action="&#123;&#123; url('messages/'.$message-&gt;id.'/edit') &#125;&#125;" method="GET"&gt;</div><div class="line">            &lt;button type="submit" id="edit-message-&#123;&#123; $message-&gt;id &#125;&#125;" class="btn btn-info"&gt;</div><div class="line">                &lt;i class="fa fa-pencil fa-fw"&gt;&lt;/i&gt;Edit</div><div class="line">            &lt;/button&gt;</div><div class="line">        &lt;/form&gt;</div><div class="line">    @endif</div><div class="line">&lt;/td&gt;</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>MessageController</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">public function edit(Message $message)</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> view(<span class="string">'messages.edit'</span>,compact(<span class="string">'message'</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><figcaption><span>edit.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">@extends('layouts.app')</div><div class="line"></div><div class="line">@section('content')</div><div class="line">&lt;div class="container"&gt;</div><div class="line">&lt;div class="row"&gt;</div><div class="line">&lt;div class="col-md-6 col-md-offset-3"&gt;</div><div class="line"></div><div class="line">    &lt;div class="breadcrumb"&gt;Origin Message: &#123;&#123; $message-&gt;name &#125;&#125;&lt;/div&gt;</div><div class="line"></div><div class="line">    &lt;form method="POST" action="&#123;&#123; url('messages/'.$message-&gt;id) &#125;&#125;"&gt;</div><div class="line">        &#123;&#123; csrf_field() &#125;&#125;</div><div class="line">	      &#123;&#123; method_field('PATCH') &#125;&#125;</div><div class="line">        &lt;div class="form-group"&gt;</div><div class="line">            &lt;textarea name="body" class="form-control"&gt;&#123;&#123; $message-&gt;name &#125;&#125;&lt;/textarea&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line"></div><div class="line">        &lt;div class="form-group"&gt;</div><div class="line">            &lt;button type="submit" class="btn btn-primary"&gt;Update Comment&lt;/button&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/form&gt;</div><div class="line"></div><div class="line">&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">@endsection</div></pre></td></tr></table></figure>
<p><code>Route::patch(&#39;messages/{message}&#39;, &#39;MessageController@update&#39;);</code></p>
<figure class="highlight ruby"><figcaption><span>MessageController</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public function update(Request $request, Message $message)</div><div class="line">&#123;</div><div class="line">		$this-&gt;authorize(<span class="string">'update'</span>, $message);</div><div class="line"></div><div class="line">    $message-&gt;update([</div><div class="line">    		<span class="string">'name'</span> =&gt; $request-&gt;name</div><div class="line">    ]);</div><div class="line">    <span class="keyword">return</span> redirect(<span class="string">'/messages'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>app/Policies/MessagePolicy.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public function update(User $user, Message $message)&#123;</div><div class="line">		<span class="keyword">return</span> $user-&gt;id === $message-&gt;user_id;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="Ajax新增留言"><a href="#Ajax新增留言" class="headerlink" title="Ajax新增留言"></a>Ajax新增留言</h2><figure class="highlight ruby"><figcaption><span>resources/views/layouts/app.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;meta name=<span class="string">"csrf-token"</span> content=<span class="string">"&#123;&#123; csrf_token() &#125;&#125;"</span> /&gt;</div><div class="line">@yield(<span class="string">'css'</span>)</div><div class="line">@yield(<span class="string">'js'</span>)</div></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>resources/views/messages/index.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@section('js')</div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">'&#123;&#123; asset("js/index.js") &#125;&#125;'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">@endsection</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"ajax"</span> <span class="attr">class</span>=<span class="string">"btn btn-default"</span> <span class="attr">style</span>=<span class="string">"float:right"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-plus"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>Ajax留言<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">"ajax-append"</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><figcaption><span>js/index.js</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">$.ajaxSetup(&#123;</div><div class="line">    <span class="attr">headers</span>: &#123;</div><div class="line">        <span class="string">'X-CSRF-TOKEN'</span>: $(<span class="string">'meta[name="csrf-token"]'</span>).attr(<span class="string">'content'</span>)</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">$(<span class="string">'#ajax'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    $.ajax(&#123;</div><div class="line">        <span class="attr">url</span>: <span class="string">"/message"</span>,</div><div class="line">        <span class="attr">data</span>: &#123;</div><div class="line">            <span class="attr">name</span>: $(<span class="string">"#message-name"</span>).val()</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">type</span>: <span class="string">"POST"</span>,</div><div class="line">        <span class="attr">dataType</span>: <span class="string">"json"</span>,</div><div class="line">        <span class="attr">success</span>: <span class="function"><span class="keyword">function</span>(<span class="params">data,statusTxt,xhr</span>) </span>&#123;</div><div class="line">            $(<span class="string">'#ajax-append'</span>).append(<span class="string">"&lt;tr&gt;&lt;td class='table-text'&gt;&lt;a href=messages/"</span>+data.id+<span class="string">"&gt;&lt;div&gt;"</span>+data.message+<span class="string">"&lt;/div&gt;&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;/tr&gt;"</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">error</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="string">"fail"</span>);</div><div class="line">        &#125;,</div><div class="line">        <span class="attr">complete</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<figure class="highlight ruby"><figcaption><span>MessageController@store</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$message = Message::orderby(<span class="string">'created_at'</span>,<span class="string">'desc'</span>)-&gt;first();</div><div class="line">$response = array(</div><div class="line">    <span class="string">'id'</span> =&gt; $message-&gt;id,</div><div class="line">    <span class="string">'message'</span> =&gt; $message-&gt;name</div><div class="line">);</div><div class="line"><span class="keyword">if</span>($request-&gt;ajax())&#123;</div><div class="line">    <span class="keyword">return</span> response()-&gt;json($response);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><figcaption><span>雜</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// $('#...').submit(...</div><div class="line">// event.preventDefault(); // 阻止元素發生默認的行為,當點擊提交按鈕時阻止表單提交）。</div><div class="line">$("#form id").find(":text,textarea").each(function() &#123;</div><div class="line">    $(this).val("");</div><div class="line">&#125;);</div><div class="line">// :text 是 type selector , textarea是標籤</div><div class="line">// 會選到很多個所以each每一個</div></pre></td></tr></table></figure>
<h2 id="回覆關聯user-id-並且eager-load"><a href="#回覆關聯user-id-並且eager-load" class="headerlink" title="回覆關聯user_id,並且eager-load"></a>回覆關聯user_id,並且eager-load</h2><figure class="highlight ruby"><figcaption><span>create_notes_table.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$table-&gt;integer(<span class="string">'user_id'</span>)-&gt;unsigned()-&gt;index();</div></pre></td></tr></table></figure>
<p><code>php artisan migrate:refresh</code><br><figure class="highlight ruby"><figcaption><span>app/Note.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">protected $fillable = [<span class="string">'body'</span>,<span class="string">'user_id'</span>];</div><div class="line"></div><div class="line">public function user()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> $this-&gt;belongsTo(User::<span class="class"><span class="keyword">class</span>);</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><figcaption><span>NotesController@store</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$message-&gt;notes()-&gt;create([</div><div class="line">    <span class="string">'body'</span> =&gt; $request-&gt;body</div><div class="line">    <span class="string">'body'</span> =&gt; $request-&gt;body,</div><div class="line">    <span class="string">'user_id'</span> =&gt; $request-&gt;user()-&gt;id</div><div class="line">]);</div></pre></td></tr></table></figure>
<figure class="highlight"><figcaption><span>MessageController@show</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">//$message = Message::with('notes.user')-&gt;find(1);</div><div class="line">$message-&gt;load('notes.user');</div></pre></td></tr></table></figure>
<p><code>class=&quot;pull-right&quot; === style=&quot;float:right&quot;</code><br><figure class="highlight html"><figcaption><span>resources/views/messages/show.blade.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span> <span class="attr">class</span>=<span class="string">"pull-right"</span>&gt;</span>&#123;&#123; $note-&gt;user-&gt;name &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">name</span>=<span class="string">"body"</span> <span class="attr">class</span>=<span class="string">"form-control"</span>&gt;</span>&#123;&#123; old('body') &#125;&#125;<span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></div></pre></td></tr></table></figure></p>
<h2 id="Seed-製作留言"><a href="#Seed-製作留言" class="headerlink" title="Seed 製作留言"></a>Seed 製作留言</h2><p><code>php artisan make:seeder MessagesTableSeeder</code><br><code>database\seeds\MessagesTableSeeder.php</code></p>
<figure class="highlight"><figcaption><span>MessagesTableSeeder.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">public function run()</div><div class="line">&#123;</div><div class="line">    // 新增前清空</div><div class="line">    // DB::table('&#123;資料表名稱&#125;')-&gt;truncate();</div><div class="line">    // OR</div><div class="line">    \App\Message::truncate();</div><div class="line"></div><div class="line">    // factory(\App\Message::class,5)‐&gt;create(); (database\factories\ModelFactory.php)</div><div class="line">    // OR 以下</div><div class="line">		$faker = \Faker\Factory::create('zh_TW'); // 假資料</div><div class="line">    foreach(range(1, 5) as $number) &#123;</div><div class="line">        $rand=rand(0,1);</div><div class="line">        \App\Message::create([</div><div class="line">            'name' =&gt; $number.'-fake:'.$faker-&gt;word.'rand: '.$rand,</div><div class="line">            'created_at' =&gt; \Carbon\Carbon::now()-&gt;addDays($number)</div><div class="line">        ]);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>$ php artisan db:seed --class=MessagesTableSeeder</code><br><code>OR</code><br><figure class="highlight ruby"><figcaption><span>database\seeds\DatabaseSeeder.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">use Illuminate\Database\Eloquent\Model;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">DatabaseSeeder</span> <span class="title">extends</span> <span class="title">Seeder</span></span></div><div class="line">&#123;</div><div class="line">    public function run()</div><div class="line">    &#123;</div><div class="line">        Model::unguard();</div><div class="line">        $this-&gt;call(MessagesTableSeeder::<span class="class"><span class="keyword">class</span>);</span></div><div class="line">        Model::reguard();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>$ php artisan db:seed</code></p>
<h2 id="Form-Request-Validation"><a href="#Form-Request-Validation" class="headerlink" title="Form Request Validation"></a>Form Request Validation</h2><p><code>php artisan make:request MessageRequest</code><br>authorize(授權) // 身分<br>rules(驗證規則) // 內容<br><figure class="highlight ruby"><figcaption><span>app\Http\Requests\MessageRequest.php</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">public function authorize()</div><div class="line">&#123;</div><div class="line">    <span class="regexp">//</span> Route::post(<span class="string">'message/&#123;id&#125;'</span>);</div><div class="line">    $id = $this-&gt;route(<span class="string">'id'</span>);</div><div class="line"></div><div class="line">    <span class="regexp">//</span> 檢查這個 Message 是不是這個 user 新增的?</div><div class="line">    <span class="keyword">return</span> Message::where(<span class="string">'id'</span>, $id)-&gt;where(<span class="string">'user_id'</span>, \Auth::id())-&gt;exist();</div><div class="line">&#125;</div><div class="line">public function rules()</div><div class="line">&#123;</div><div class="line">    <span class="keyword">return</span> [</div><div class="line">        <span class="string">'body'</span> =&gt; <span class="string">'require'</span></div><div class="line">    ];</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">use App\Http\Requests\MessageRequest;</div><div class="line">public function update(MessageRequest $request)&#123;</div><div class="line">    執行至此表式通過驗證</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><a name="bot"></a></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item"></div>
      <div class="post-nav-item">
    <a href="/2016/05/14/laravel-from-scratch/" rel="next" title="Laravel From Scratch 筆記">
      Laravel From Scratch 筆記 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#目錄"><span class="nav-number">1.</span> <span class="nav-text">目錄</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Environment-環境"><span class="nav-number">2.</span> <span class="nav-text">- Environment 環境</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安裝-Laravel"><span class="nav-number">2.1.</span> <span class="nav-text">安裝 Laravel</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#env檔"><span class="nav-number">2.2.</span> <span class="nav-text">.env檔</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Database-資料庫"><span class="nav-number">3.</span> <span class="nav-text">- Database 資料庫</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#資料表-Table"><span class="nav-number">3.1.</span> <span class="nav-text">資料表 Table</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Model-模型-Eloquent-Model"><span class="nav-number">3.2.</span> <span class="nav-text">Model 模型 (Eloquent Model)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#關聯-Relationship-Eloquent-Relationships"><span class="nav-number">3.3.</span> <span class="nav-text">關聯 Relationship (Eloquent Relationships)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Routing-路由"><span class="nav-number">4.</span> <span class="nav-text">- Routing 路由</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#View-視圖"><span class="nav-number">4.1.</span> <span class="nav-text">View 視圖</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Authentication-認證"><span class="nav-number">4.2.</span> <span class="nav-text">Authentication 認證</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Message-Controller"><span class="nav-number">4.3.</span> <span class="nav-text">Message Controller</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Layouts-amp-Views"><span class="nav-number">5.</span> <span class="nav-text">- Layouts &amp; Views</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Layout"><span class="nav-number">5.1.</span> <span class="nav-text">Layout</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Views"><span class="nav-number">5.2.</span> <span class="nav-text">Views</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Create-新增"><span class="nav-number">6.</span> <span class="nav-text">- Create 新增</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Validation-驗證"><span class="nav-number">6.1.</span> <span class="nav-text">Validation 驗證</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#errors-Variable"><span class="nav-number">6.2.</span> <span class="nav-text">$errors Variable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Create-Message"><span class="nav-number">6.3.</span> <span class="nav-text">Create Message!</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Read-讀取"><span class="nav-number">7.</span> <span class="nav-text">- Read 讀取</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Displaying-Messages"><span class="nav-number">7.1.</span> <span class="nav-text">Displaying Messages!</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dependency-Injection-依賴注入"><span class="nav-number">7.2.</span> <span class="nav-text">Dependency Injection 依賴注入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Displaying-Messages-1"><span class="nav-number">7.3.</span> <span class="nav-text">Displaying Messages</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Delete-刪除"><span class="nav-number">8.</span> <span class="nav-text">- Delete 刪除</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#增加刪除按鈕"><span class="nav-number">8.1.</span> <span class="nav-text">增加刪除按鈕</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Route-Model-Binding"><span class="nav-number">8.2.</span> <span class="nav-text">Route Model Binding</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Authorization-認證"><span class="nav-number">8.3.</span> <span class="nav-text">Authorization 認證</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Review-後記"><span class="nav-number">9.</span> <span class="nav-text">- Review 後記</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#完整Layout"><span class="nav-number">9.1.</span> <span class="nav-text">完整Layout</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#只有自己能看到"><span class="nav-number">9.2.</span> <span class="nav-text">只有自己能看到</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#顯示單一留言詳細內容"><span class="nav-number">9.3.</span> <span class="nav-text">顯示單一留言詳細內容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#新增留言的回覆"><span class="nav-number">9.4.</span> <span class="nav-text">新增留言的回覆</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#編輯留言"><span class="nav-number">9.5.</span> <span class="nav-text">編輯留言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax新增留言"><span class="nav-number">9.6.</span> <span class="nav-text">Ajax新增留言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#回覆關聯user-id-並且eager-load"><span class="nav-number">9.7.</span> <span class="nav-text">回覆關聯user_id,並且eager-load</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Seed-製作留言"><span class="nav-number">9.8.</span> <span class="nav-text">Seed 製作留言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Form-Request-Validation"><span class="nav-number">9.9.</span> <span class="nav-text">Form Request Validation</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Chenxu Wang</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">57</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">tags</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Chenxu Wang</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/muse.js"></script>
<script src="/js/next-boot.js"></script>



  















  

  

</body>
</html>
